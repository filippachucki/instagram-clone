(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,a){},119:function(e,t,a){"use strict";a.r(t);var n=a(5),c=a.n(n),r=a(79),o=a.n(r),l=(a(87),a(14)),s=(a(89),a(91),a(159)),i=a(52),m=(a(93),a(94),a(95),i.a.initializeApp({apiKey:"AIzaSyBo2Os9iSV7rzS6-_l-bda-M69C2ffP0as",authDomain:"instagram-clone-e61bd.firebaseapp.com",databaseURL:"https://instagram-clone-e61bd-default-rtdb.europe-west1.firebasedatabase.app",projectId:"instagram-clone-e61bd",storageBucket:"instagram-clone-e61bd.appspot.com",messagingSenderId:"748180357948",appId:"1:748180357948:web:bfb89c1e47674c13b89439"}).firestore()),u=i.a.auth(),p=i.a.storage();var d=function(e){var t=e.postId,a=e.user,r=e.username,o=e.caption,u=e.imageUrl,p=Object(n.useState)([]),d=Object(l.a)(p,2),g=d[0],f=d[1],b=Object(n.useState)(""),E=Object(l.a)(b,2),h=E[0],v=E[1];return Object(n.useEffect)(function(){var e;return t&&(e=m.collection("posts").doc(t).collection("comments").orderBy("timestamp","desc").onSnapshot(function(e){f(e.docs.map(function(e){return e.data()}))})),function(){e(e)}},[t]),c.a.createElement("div",{className:"post"},c.a.createElement("div",{className:"post__header"},c.a.createElement(s.a,{className:"post__avatar",alt:"lindyeem",src:"/static/images/avatar/1.jpg"}),c.a.createElement("h3",null,r)),c.a.createElement("img",{className:"post__image",src:u,alt:""}),c.a.createElement("h4",{className:"post__text"},c.a.createElement("strong",null,r," "),o),c.a.createElement("div",{className:"post__comments"},g.map(function(e){return c.a.createElement("p",null,c.a.createElement("strong",null,e.username)," ",e.text)})),a&&c.a.createElement("form",{className:"post__commentBox"},c.a.createElement("input",{className:"post__input",type:"text",placeholder:"Add a comment...",value:h,onChange:function(e){return v(e.target.value)}}),c.a.createElement("button",{className:"post__button",disabled:!h,type:"submit",onClick:function(e){e.preventDefault(),m.collection("posts").doc(t).collection("comments").add({text:h,username:a.displayName,timestamp:i.a.firestore.FieldValue.serverTimestamp()}),v("")}},"Post")))},g=a(156),f=a(150),b=a(157),E=a(158),h=a(98);a(114);var v=function(e){var t=e.username,a=Object(n.useState)(""),r=Object(l.a)(a,2),o=r[0],s=r[1],i=Object(n.useState)(0),u=Object(l.a)(i,2),d=u[0],f=u[1],b=Object(n.useState)(null),E=Object(l.a)(b,2),v=E[0],_=E[1];return c.a.createElement("div",{className:"imageupload"},c.a.createElement("progress",{className:"imageupload__progress",value:d,max:"100"}),c.a.createElement("input",{type:"text",placeholder:"Enter a caption..",onChange:function(e){return s(e.target.value)},value:o}),c.a.createElement("input",{type:"file",onChange:function(e){e.target.files[0]&&_(e.target.files[0])}}),c.a.createElement(g.a,{onClick:function(){p.ref("images/".concat(v.name)).put(v).on("state_changed",function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);f(t)},function(e){console.log(e),alert(e.message)},function(){p.ref("images").child(v.name).getDownloadURL().then(function(e){m.collection("posts").add({timestamp:h.a.firestore.FieldValue.serverTimestamp(),caption:o,imageUrl:e,username:t}),f(0),s(""),_(null)})})}},"Upload"))},_=a(100);function j(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var O=Object(f.a)(function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}});var S=function(){var e=O(),t=Object(n.useState)(!1),a=Object(l.a)(t,2),r=a[0],o=a[1],s=Object(n.useState)(j),i=Object(l.a)(s,1)[0],p=Object(n.useState)([]),f=Object(l.a)(p,2),h=f[0],S=f[1],N=Object(n.useState)(!1),y=Object(l.a)(N,2),C=y[0],w=y[1],I=Object(n.useState)(""),k=Object(l.a)(I,2),x=k[0],U=k[1],B=Object(n.useState)(""),L=Object(l.a)(B,2),P=L[0],A=L[1],D=Object(n.useState)(""),F=Object(l.a)(D,2),T=F[0],z=F[1],M=Object(n.useState)(null),R=Object(l.a)(M,2),V=R[0],J=R[1];return Object(n.useEffect)(function(){var e=u.onAuthStateChanged(function(e){e?(console.log(e),J(e)):J(null)});return function(){e(null)}},[V,x]),Object(n.useEffect)(function(){m.collection("posts").onSnapshot(function(e){S(e.docs.map(function(e){return{id:e.id,post:e.data()}}))})},[]),c.a.createElement("div",{className:"app"},c.a.createElement(_.a,null,c.a.createElement("meta",{charSet:"utf-8"}),c.a.createElement("title",null,"InstagramLite"),c.a.createElement("link",{rel:"canonical",href:"http://mysite.com/example"}),c.a.createElement("meta",{name:"description",content:"Instagram Clone"})),c.a.createElement(b.a,{open:C,onClose:function(){return w(!1)}},c.a.createElement("div",{style:i,className:e.paper},c.a.createElement("form",{className:"app__signup"},c.a.createElement("center",null,c.a.createElement("img",{className:"app__headerImage",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Instagram_logo.svg/320px-Instagram_logo.svg.png",alt:"logo"})),c.a.createElement(E.a,{placeholder:"username",type:"text",value:x,onChange:function(e){return U(e.target.value)}}),c.a.createElement(E.a,{placeholder:"email",type:"text",value:T,onChange:function(e){return z(e.target.value)}}),c.a.createElement(E.a,{placeholder:"password",type:"password",value:P,onChange:function(e){return A(e.target.value)}}),c.a.createElement(g.a,{type:"submit",onClick:function(e){e.preventDefault(),u.createUserWithEmailAndPassword(T,P).then(function(e){return e.user.updateProfile({displayName:x}).then(function(e){J(e)})}).catch(function(e){return alert(e.message)}),w(!1)}},"Sign Up")))),c.a.createElement(b.a,{open:r,onClose:function(){return o(!1)}},c.a.createElement("div",{style:i,className:e.paper},c.a.createElement("form",{className:"app__signup"},c.a.createElement("center",null,c.a.createElement("img",{className:"app__headerImage",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Instagram_logo.svg/320px-Instagram_logo.svg.png",alt:"logo"})),c.a.createElement(E.a,{placeholder:"email",type:"text",value:T,onChange:function(e){return z(e.target.value)}}),c.a.createElement(E.a,{placeholder:"password",type:"password",value:P,onChange:function(e){return A(e.target.value)}}),c.a.createElement(g.a,{type:"submit",onClick:function(e){e.preventDefault(),u.signInWithEmailAndPassword(T,P).catch(function(e){return alert(e.message)}),o(!1)}},"Sign In")))),c.a.createElement("div",{className:"app__header"},c.a.createElement("img",{className:"app__headerImage",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Instagram_logo.svg/320px-Instagram_logo.svg.png",alt:"logo"}),V?c.a.createElement(g.a,{onClick:function(){return u.signOut()}},"Logout"):c.a.createElement("div",{className:"app__loginContainer"},c.a.createElement(g.a,{onClick:function(){return o(!0)}},"Sign In"),c.a.createElement(g.a,{onClick:function(){return w(!0)}},"Sign Up"))),c.a.createElement("div",{className:"app__posts"},h.map(function(e){var t=e.id,a=e.post;return c.a.createElement(d,{key:t,postId:t,user:V,username:a.username,caption:a.caption,imageUrl:a.imageUrl})})),V?c.a.createElement("div",{className:"app__upload"},c.a.createElement(v,{username:V.displayName})):c.a.createElement("center",null,c.a.createElement("h3",null,"Login to upload")))},N=function(e){e&&e instanceof Function&&a.e(1).then(a.bind(null,154)).then(function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),r(e),o(e)})};o.a.createRoot(document.getElementById("root")).render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(S,null))),N()},80:function(e,t,a){e.exports=a(119)},87:function(e,t,a){},89:function(e,t,a){},91:function(e,t,a){}},[[80,3,2]]]);
//# sourceMappingURL=main.9fc0a02a.chunk.js.map