{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\filip\\\\instagram-clone\\\\instagram-clone\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\filip\\\\instagram-clone\\\\instagram-clone\\\\src\\\\ImageUpload.js\";\nimport { Button } from '@mui/material';\nimport React, { useState } from 'react';\nimport { db, storage } from './firebase';\n\nfunction ImageUpload(username) {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      caption = _useState2[0],\n      setCaption = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      progress = _useState4[0],\n      setProgress = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      image = _useState6[0],\n      setImage = _useState6[1];\n\n  var handleChange = function handleChange(e) {\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n    }\n  };\n\n  var handleUpload = function handleUpload() {\n    var uploadTask = storage.ref(\"images/\".concat(images.name)).put(image);\n    uploadTask.on(\"state_changed\", function (snapshot) {\n      var progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n      setProgress(progress);\n    }, function (error) {\n      console.log(error);\n      alert(error.message);\n    }, function () {\n      storage.ref(\"images\").child(image.name).getDownloadURL().then(function (url) {\n        db.collection(\"posts\").add({\n          timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n          caption: caption,\n          imageUrl: url,\n          username: username\n        });\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }, \"ImageUpload\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Enter a caption..\",\n    onChange: function onChange(event) {\n      return setCaption(event.target.value);\n    },\n    value: caption,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, \"Upload\"));\n}\n\nexport default ImageUpload;","map":{"version":3,"names":["Button","React","useState","db","storage","ImageUpload","username","caption","setCaption","progress","setProgress","image","setImage","handleChange","e","target","files","handleUpload","uploadTask","ref","images","name","put","on","snapshot","Math","round","bytesTransferred","totalBytes","error","console","log","alert","message","child","getDownloadURL","then","url","collection","add","timestamp","firebase","firestore","FieldValue","serverTimestamp","imageUrl","event","value"],"sources":["C:/Users/filip/instagram-clone/instagram-clone/src/ImageUpload.js"],"sourcesContent":["import { Button } from '@mui/material'\r\nimport React, { useState } from 'react'\r\nimport { db, storage } from './firebase';\r\n\r\nfunction ImageUpload(username) {\r\n    const [caption, setCaption] = useState('');\r\n    const [progress, setProgress] = useState(0);\r\n    const [image, setImage] = useState(null);\r\n\r\n    const handleChange = (e) => {\r\n        if (e.target.files[0]) {\r\n            setImage(e.target.files[0]);\r\n        }\r\n    };\r\n\r\n    const handleUpload = () => {\r\n        const uploadTask = storage.ref(`images/${images.name}`).put(image);\r\n        uploadTask.on(\r\n            \"state_changed\",\r\n            (snapshot) => {\r\n                const progress = Math.round(\r\n                    (snapshot.bytesTransferred / snapshot.totalBytes * 100)\r\n                );\r\n                setProgress(progress);\r\n            },\r\n            (error) => {\r\n                console.log(error);\r\n                alert(error.message);\r\n            },\r\n            () => {\r\n                storage\r\n                    .ref(\"images\")\r\n                    .child(image.name)\r\n                    .getDownloadURL()\r\n                    .then(url => {\r\n                        db.collection(\"posts\").add({\r\n                            timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n                            caption: caption,\r\n                            imageUrl: url,\r\n                            username: username\r\n                        })\r\n                    })\r\n            }\r\n        )\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            <h1>ImageUpload</h1>\r\n            <input type=\"text\" placeholder='Enter a caption..' onChange={event => setCaption(event.target.value)} value={caption} />\r\n            <input type='file' onChange={handleChange} />\r\n            <Button onClick={handleUpload}>Upload</Button>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ImageUpload"],"mappings":";;AAAA,SAASA,MAAT,QAAuB,eAAvB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,EAAT,EAAaC,OAAb,QAA4B,YAA5B;;AAEA,SAASC,WAAT,CAAqBC,QAArB,EAA+B;EAAA,gBACGJ,QAAQ,CAAC,EAAD,CADX;EAAA;EAAA,IACpBK,OADoB;EAAA,IACXC,UADW;;EAAA,iBAEKN,QAAQ,CAAC,CAAD,CAFb;EAAA;EAAA,IAEpBO,QAFoB;EAAA,IAEVC,WAFU;;EAAA,iBAGDR,QAAQ,CAAC,IAAD,CAHP;EAAA;EAAA,IAGpBS,KAHoB;EAAA,IAGbC,QAHa;;EAK3B,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,CAAD,EAAO;IACxB,IAAIA,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAJ,EAAuB;MACnBJ,QAAQ,CAACE,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CAAR;IACH;EACJ,CAJD;;EAMA,IAAMC,YAAY,GAAG,SAAfA,YAAe,GAAM;IACvB,IAAMC,UAAU,GAAGd,OAAO,CAACe,GAAR,kBAAsBC,MAAM,CAACC,IAA7B,GAAqCC,GAArC,CAAyCX,KAAzC,CAAnB;IACAO,UAAU,CAACK,EAAX,CACI,eADJ,EAEI,UAACC,QAAD,EAAc;MACV,IAAMf,QAAQ,GAAGgB,IAAI,CAACC,KAAL,CACZF,QAAQ,CAACG,gBAAT,GAA4BH,QAAQ,CAACI,UAArC,GAAkD,GADtC,CAAjB;MAGAlB,WAAW,CAACD,QAAD,CAAX;IACH,CAPL,EAQI,UAACoB,KAAD,EAAW;MACPC,OAAO,CAACC,GAAR,CAAYF,KAAZ;MACAG,KAAK,CAACH,KAAK,CAACI,OAAP,CAAL;IACH,CAXL,EAYI,YAAM;MACF7B,OAAO,CACFe,GADL,CACS,QADT,EAEKe,KAFL,CAEWvB,KAAK,CAACU,IAFjB,EAGKc,cAHL,GAIKC,IAJL,CAIU,UAAAC,GAAG,EAAI;QACTlC,EAAE,CAACmC,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2B;UACvBC,SAAS,EAAEC,QAAQ,CAACC,SAAT,CAAmBC,UAAnB,CAA8BC,eAA9B,EADY;UAEvBrC,OAAO,EAAEA,OAFc;UAGvBsC,QAAQ,EAAER,GAHa;UAIvB/B,QAAQ,EAAEA;QAJa,CAA3B;MAMH,CAXL;IAYH,CAzBL;EA2BH,CA7BD;;EAgCA,oBACI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,iBADJ,eAEI;IAAO,IAAI,EAAC,MAAZ;IAAmB,WAAW,EAAC,mBAA/B;IAAmD,QAAQ,EAAE,kBAAAwC,KAAK;MAAA,OAAItC,UAAU,CAACsC,KAAK,CAAC/B,MAAN,CAAagC,KAAd,CAAd;IAAA,CAAlE;IAAsG,KAAK,EAAExC,OAA7G;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFJ,eAGI;IAAO,IAAI,EAAC,MAAZ;IAAmB,QAAQ,EAAEM,YAA7B;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAHJ,eAII,oBAAC,MAAD;IAAQ,OAAO,EAAEI,YAAjB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,YAJJ,CADJ;AASH;;AAED,eAAeZ,WAAf"},"metadata":{},"sourceType":"module"}