{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\filip\\\\instagram-clone\\\\instagram-clone\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\filip\\\\instagram-clone\\\\instagram-clone\\\\src\\\\Post.js\";\n\nimport React, { useState, useEffect, forwardRef } from \"react\";\nimport './Post.css';\nimport { Avatar } from '@mui/material';\nimport { db } from \"./firebase\";\nvar Post = forwardRef(function (_ref, ref) {\n  var user = _ref.user,\n      username = _ref.username,\n      postId = _ref.postId,\n      imageUrl = _ref.imageUrl,\n      caption = _ref.caption;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      comments = _useState2[0],\n      setComments = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      comment = _useState4[0],\n      setComment = _useState4[1];\n\n  useEffect(function () {\n    var unsubscribe;\n\n    if (postId) {\n      unsubscribe = db.collection(\"posts\").doc(postId).collection(\"comments\").onSnapshot(function (snapshot) {\n        setComments(snapshot.docs.map(function (doc) {\n          return doc.data();\n        }));\n      });\n    }\n\n    return function () {\n      unsubscribe();\n    };\n  }, [postId]);\n\n  var postComment = function postComment(e) {\n    e.preventDefault();\n    db.collection(\"posts\").doc(postId).collection(\"comments\").add({\n      text: comment,\n      username: user.displayName\n    });\n    setComment(\"\");\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post\",\n    ref: ref,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__header\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: \"post__avatar\",\n    alt: username,\n    src: \"/static/images/avatar/1.jpg\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }\n  }, username)), /*#__PURE__*/React.createElement(\"img\", {\n    className: \"post__image\",\n    src: imageUrl,\n    alt: \"post\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"post__text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, username, \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"post__caption\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 22\n    }\n  }, caption)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__comments\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, comments.map(function (comment) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 15\n      }\n    }, comment.username), \" \", comment.text);\n  })), user && /*#__PURE__*/React.createElement(\"form\", {\n    className: \"post__commentBox\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"post__input\",\n    type: \"text\",\n    placeholder: \"Add a comment...\",\n    value: comment,\n    onChange: function onChange(e) {\n      return setComment(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    disabled: !comment,\n    className: \"post__button\",\n    type: \"submit\",\n    onClick: postComment,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, \"Post\")));\n});\nexport default Post;","map":{"version":3,"names":["React","useState","useEffect","forwardRef","Avatar","db","Post","ref","user","username","postId","imageUrl","caption","comments","setComments","comment","setComment","unsubscribe","collection","doc","onSnapshot","snapshot","docs","map","data","postComment","e","preventDefault","add","text","displayName","target","value"],"sources":["C:/Users/filip/instagram-clone/instagram-clone/src/Post.js"],"sourcesContent":["import React, { useState, useEffect, forwardRef } from \"react\";\r\nimport './Post.css';\r\nimport { Avatar } from '@mui/material';\r\nimport { db } from \"./firebase\";\r\n\r\n\r\nconst Post = forwardRef(\r\n  ({ user, username, postId, imageUrl, caption }, ref) => {\r\n    const [comments, setComments] = useState([]);\r\n    const [comment, setComment] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n      let unsubscribe;\r\n      if (postId) {\r\n        unsubscribe = db\r\n          .collection(\"posts\")\r\n          .doc(postId)\r\n          .collection(\"comments\")\r\n          .onSnapshot((snapshot) => {\r\n            setComments(snapshot.docs.map((doc) => doc.data()));\r\n          });\r\n      }\r\n\r\n      return () => {\r\n        unsubscribe();\r\n      };\r\n    }, [postId]);\r\n\r\n    const postComment = (e) => {\r\n      e.preventDefault();\r\n\r\n      db.collection(\"posts\").doc(postId).collection(\"comments\").add({\r\n        text: comment,\r\n        username: user.displayName,\r\n      });\r\n      setComment(\"\");\r\n    };\r\n\r\n    return (\r\n      <div className=\"post\" ref={ref}>\r\n        <div className=\"post__header\">\r\n          <Avatar\r\n            className=\"post__avatar\"\r\n            alt={username}\r\n            src=\"/static/images/avatar/1.jpg\"\r\n          />\r\n          <h3>{username}</h3>\r\n        </div>\r\n\r\n        <img className=\"post__image\" src={imageUrl} alt=\"post\" />\r\n        <h4 className=\"post__text\">\r\n          {username} <span className=\"post__caption\">{caption}</span>\r\n        </h4>\r\n\r\n        <div className=\"post__comments\">\r\n          {comments.map((comment) => (\r\n            <p>\r\n              <b>{comment.username}</b> {comment.text}\r\n            </p>\r\n          ))}\r\n        </div>\r\n\r\n        {user && (\r\n          <form className=\"post__commentBox\">\r\n            <input\r\n              className=\"post__input\"\r\n              type=\"text\"\r\n              placeholder=\"Add a comment...\"\r\n              value={comment}\r\n              onChange={(e) => setComment(e.target.value)}\r\n            />\r\n            <button\r\n              disabled={!comment}\r\n              className=\"post__button\"\r\n              type=\"submit\"\r\n              onClick={postComment}\r\n            >\r\n              Post\r\n            </button>\r\n          </form>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nexport default Post;"],"mappings":"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"},"metadata":{},"sourceType":"module"}