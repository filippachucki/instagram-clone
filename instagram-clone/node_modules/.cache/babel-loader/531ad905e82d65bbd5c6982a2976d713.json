{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\filip\\\\instagram-clone\\\\instagram-clone\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\filip\\\\instagram-clone\\\\instagram-clone\\\\src\\\\Post.js\";\nimport React, { useState, useEffect } from \"react\";\nimport './Post.css';\nimport { Avatar } from '@mui/material';\nimport { db } from \"./firebase\";\nimport firebase from 'firebase/compat';\n\nfunction Posts(_ref) {\n  var _this = this;\n\n  var postId = _ref.postId,\n      user = _ref.user,\n      username = _ref.username,\n      caption = _ref.caption,\n      imageUrl = _ref.imageUrl;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      comments = _useState2[0],\n      setComments = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      comment = _useState4[0],\n      setComment = _useState4[1];\n\n  useEffect(function () {\n    var unsubscribe;\n\n    if (postId) {\n      unsubscribe = db.collection(\"posts\").doc(postId).collection(\"comments\").orderBy('timestamp', 'desc').onSnapshot(function (snapshot) {\n        setComments(snapshot.docs.map(function (doc) {\n          return doc.data();\n        }));\n      });\n    }\n\n    return function () {\n      unsubscribe(true);\n    };\n  }, [postId]);\n\n  var postComment = function postComment(event) {\n    event.preventDefault();\n    db.collection(\"posts\").doc(postId).collection(\"comments\").add({\n      text: comment,\n      username: user.displayName,\n      timestamp: firebase.firestore.FieldValue.serverTimestamp()\n    });\n    setComment('');\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: \"post__avatar\",\n    alt: \"lindyeem\",\n    src: \"/static/images/avatar/1.jpg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, username)), /*#__PURE__*/React.createElement(\"img\", {\n    className: \"post__image\",\n    src: imageUrl,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"post__text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, username, \" \"), caption), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__comments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, comments.map(function (comment) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }\n    }, comment.username), \" \", comment.text);\n  })), user && /*#__PURE__*/React.createElement(\"form\", {\n    className: \"post__commentBox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"post__input\",\n    type: \"text\",\n    placeholder: \"Add a comment...\",\n    value: comment,\n    onChange: function onChange(e) {\n      return setComment(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"post__button\",\n    disabled: !comment,\n    type: \"submit\",\n    onClick: postComment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, \"Post\")));\n}\n\nexport default Posts;","map":{"version":3,"names":["React","useState","useEffect","Avatar","db","firebase","Posts","postId","user","username","caption","imageUrl","comments","setComments","comment","setComment","unsubscribe","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","postComment","event","preventDefault","add","text","displayName","timestamp","firestore","FieldValue","serverTimestamp","e","target","value"],"sources":["C:/Users/filip/instagram-clone/instagram-clone/src/Post.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport './Post.css';\r\nimport { Avatar } from '@mui/material';\r\nimport { db } from \"./firebase\";\r\nimport firebase from 'firebase/compat';\r\n\r\n\r\n\r\n\r\nfunction Posts({ postId, user, username, caption, imageUrl }) {\r\n  const [comments, setComments] = useState([]);\r\n  const [comment, setComment] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    let unsubscribe;\r\n    if (postId) {\r\n      unsubscribe = db\r\n        .collection(\"posts\")\r\n        .doc(postId)\r\n        .collection(\"comments\")\r\n        .orderBy('timestamp', 'desc')\r\n        .onSnapshot((snapshot) => {\r\n          setComments(snapshot.docs.map((doc) => doc.data()));\r\n        });\r\n    }\r\n    return () => {\r\n      unsubscribe(true);\r\n    };\r\n  }, [postId]);\r\n\r\n  const postComment = (event) => {\r\n    event.preventDefault();\r\n\r\n    db.collection(\"posts\").doc(postId).collection(\"comments\").add({\r\n      text: comment,\r\n      username: user.displayName,\r\n      timestamp: firebase.firestore.FieldValue.serverTimestamp()\r\n    });\r\n    setComment('');\r\n  };\r\n\r\n  return (\r\n    <div className=\"post\">\r\n      <div className=\"post__header\">\r\n        <Avatar\r\n          className=\"post__avatar\"\r\n          alt=\"lindyeem\"\r\n          src=\"/static/images/avatar/1.jpg\"\r\n        />\r\n        <h3>{username}</h3>\r\n      </div>\r\n\r\n      <img className=\"post__image\" src={imageUrl} alt=\"\"></img>\r\n\r\n      <h4 className=\"post__text\">\r\n        <strong>{username} </strong>\r\n        {caption}\r\n      </h4>\r\n\r\n      <div className=\"post__comments\">\r\n        {comments.map((comment) => (\r\n          <p>\r\n            <strong>{comment.username}</strong> {comment.text}\r\n          </p>\r\n        ))}\r\n      </div>\r\n      {user && (\r\n        <form className=\"post__commentBox\">\r\n          <input\r\n            className=\"post__input\"\r\n            type=\"text\"\r\n            placeholder=\"Add a comment...\"\r\n            value={comment}\r\n            onChange={(e) => setComment(e.target.value)}\r\n          />\r\n          <button\r\n            className=\"post__button\"\r\n            disabled={!comment}\r\n            type=\"submit\"\r\n            onClick={postComment}\r\n          >\r\n            Post\r\n          </button>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Posts;"],"mappings":"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"},"metadata":{},"sourceType":"module"}